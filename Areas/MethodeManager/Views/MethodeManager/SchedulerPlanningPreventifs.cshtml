@using DevKbfSteel.Models
@using DevExpress.XtraReports.UI;
@using DevKbfSteel.Controllers
@using DevExpress.XtraReports.Parameters;
@using DevKbfSteel.Reports
@using DevExpress.AspNetCore
@using DevExtreme.AspNet.Mvc
@{
    ViewData["Title"] = "Méthodes-Plannification Préventif ";
    Layout = "~/Views/Shared/_LayoutMethodeManager.cshtml";
}
@(Html.DevExtreme().Scheduler()
    .ID("scheduler")
    .DataSource(d => d.Mvc()
        .Controller("MethPlanningPreventifs")
        .Key("AppointmentId")
        .LoadAction("Get")
    )
    .Editing(editing =>
    {
        editing.AllowUpdating(false);
        editing.AllowDeleting(false);
        editing.AllowAdding(false);
    })
    .RemoteFiltering(true)
    .CurrentView(SchedulerViewType.Month)
    .StartDayHour(1)
    .EndDayHour(23)
    .Height(800)
    .TextExpr("Text")
    .StartDateExpr("StartDate")
    .EndDateExpr("EndDate")
    .DescriptionExpr("Description")
    .ShowAllDayPanel(false)
    .OnAppointmentAdded(@<text>
            function(e) {
            showToast("Ajout Réussi :", e.appointmentData.Text, "success");
            }
    </text>)
    .OnAppointmentUpdated(@<text>
            function(e) {
            showToast("Modification Réussi", e.appointmentData.Text, "info");
            }
    </text>)
    .OnAppointmentDeleted(@<text>
            function(e) {
            showToast("Supression Réussi", e.appointmentData.Text, "warning");
            }
    </text>)
    )
    @(Html.DevExtreme().SpeedDialAction()
        .ID("speedDialAction")
        .Icon("plus")
        .OnClick(@<text>
            function() {
            getSchedulerInstance().showAppointmentPopup();
            }
        </text>)
)
<script>
    function getSchedulerInstance() {
        return $("#scheduler").dxScheduler("instance");
    }
    function showToast(event, value, type) {
        DevExpress.ui.notify(event + " \"" + value + "\"" + " task", type, 800);
    }
</script>